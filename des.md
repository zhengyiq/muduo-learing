# muduo 日志库实现的思路
- 方案一：每次日志操作打开、写、关闭文件一次
    当写入日志频率高时，磁盘IO占用高；低延迟的操作中，IO效率导致延迟高。
    // 注意：多线程文件操作默认是加锁安全的，可以同时多个线程打开文件，多个写，都无问题，但是乱序。??
- 方案二：每次日志操作写一次文件，文件全局打开一次
    文件操作默认是存在一定缓冲区，写入字节总量达到一定值，才操作一次磁盘。C++中的std::ostream是非线程安全的，c的fwrite是线程安全的，但是都会出现交织混乱的情况
- 方案三：减少磁盘IO操作次数
    可以使用一个线程安全的队列，一边负责写日志消息，另一边负责取消息日志。当取消息日志条数或者总长度达到一定的数量，我们才写一次磁盘，整体上来可以降低磁盘IO的操作次数。
- 方案四：使用缓冲技术
    muduo日志库的设计思路，多个线程共用一个日志前端，使用多缓冲技术。异步日志是必须的，所以需要一个缓冲区，在这里我们使用的是多缓冲技术，基本思路是准备多块Buffer，前端负责向Buffer中填数据，后端负责将Buffer中数据取出来写入文件。这种实现的好处在于在新建日志消息的时候不必等待磁盘IO操作，前端写的时候也不会阻塞。
